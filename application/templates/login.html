{% extends 'base_navbar.html' %}

{% block title %}Login - SwiftSell{% endblock %}

{% block head_extra %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">
{% endblock %}

{% block content %}
    <div class="container">
        <div class="wrapper">
            <form class="form-signin" id="loginForm"> <!-- Added id="loginForm" for modal -->
                <h2 class="form-signin-heading">Sign in Here</h2>
                <h3 class="form-signin-subtext">Enter your SFSU email and password to sign in</h3>
                <input type="text" class="form-control" name="username" placeholder="email@sfsu.edu" required="true" autofocus="" />
                <input type="password" class="form-control" name="password" placeholder="*********" required="true"/>      
                <label class="checkbox">
                <input type="checkbox" value="remember-me" id="rememberMe" name="rememberMe"> Remember me
                </label>
                <button class="btn btn-lg btn-primary btn-block" type="submit">Login</button> 
                <a class="create-account" href="/signup">Create Account</a>
            </form>
        </div>
    </div>



<!-- Modal for email requirement -->
<div class="modal fade" id="emailModal" tabindex="-1" aria-labelledby="emailModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="emailModalLabel">Invalid Email Address</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Please use an SFSU email address that ends with @sfsu.edu.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Footer section -->
<footer class="footer">
    <div class="container text-center">
        &copy; 2024 SFSU Software Engineering Class - Team 4. All Rights Reserved.
    </div>
</footer>
{% endblock %}

{% block scripts %}
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const loginForm = document.getElementById("loginForm");
        const emailInput = loginForm.querySelector('input[name="username"]');

        loginForm.addEventListener("submit", function(event) {
            if (!emailInput.value.endsWith("@sfsu.edu")) {
                event.preventDefault(); // Stop form submission
                new bootstrap.Modal(document.getElementById('emailModal')).show(); // Show the email modal
            }
        });
    });
</script>
{% endblock %}
